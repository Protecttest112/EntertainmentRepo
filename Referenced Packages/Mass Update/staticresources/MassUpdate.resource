/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("../Util/almond",function(){}),n("extensions",[],function(){typeof Object.create!="function"&&(Object.create=function(e){var t=function(){};return t.prototype=e,new t}),typeof Object.each!="function"&&(Object.each=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}),typeof Object.first!="function"&&(Object.first=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return e[n]}),typeof Array.orderBy!="function"&&(Array.orderBy=function(e,t){return e.sort(function(e,n){return t(e)<t(n)?-1:t(e)>t(n)?1:0})}),typeof String.format!="function"&&(String.format=function(e){var t=e.match(/{\d+}/g);for(var n=0;n<t.length;n++){var r=parseInt(t[n].replace(/[{}]/,""));e=e.replace(t[n],arguments[r+1])}return e})}),n("sfdc",["extensions"],function(){return{initSforce:function(){sforce.connection.client="CRMCulture/ActionGrid/"},parseAsObject:function(){var e=location.search.slice(1).split("&"),t={};for(var n=0;n<e.length;n++){var r=e[n].split("=");r.length===2&&(t[unescape(r[0].toLowerCase())]=unescape(r[1]))}return t},parseAsArray:function(e){var t=[],n=this.parseAsObject();if(n[e]!==undefined){var r=n[e].split(",");for(var i=0;i<r.length;i++)r[i]!=""&&t.push(r[i])}return t},navigateToVFPage:function(e,t,n,r){var i=[];Object.each(n,function(e,t){i.push(t+"="+escape(e))}),e=e.replace("_","-");var s=String.format("/apex/{0}__{1}?{2}",e,t,i.join("&"));if(r){var o=window.innerWidth-400,u=window.innerHeight-50,a=window.screenX+400,f=window.screenY+50;window.open(s,"_blank","status=false, height="+u+", width="+o+", left="+a+", top="+f)}else{var l=window.open(s,"_top");l.focus()}},postToVFPage:function(e,t,n,r,i){var s="",o=window.location.hostname.split(".");if(o.length==5){instance=o[1];var u=o[0].split("--");u.length==2&&(s=u[0]+"--")}else o.length==3?instance=o[0]:instance=o[1];var a=[];Object.each(n,function(e,t){a.push(t+"="+escape(e))}),e=e.replace("_","-");var f=String.format("{0}//{1}{2}.{3}.visual.force.com/apex/{4}?{5}",location.protocol,s,e,instance,t,a.join("&")),l=document.createElement("form");l.method="post",l.action=f,Object.each(r,function(e,t){var n=document.createElement("input");n.type="hidden",typeof e=="object"&&e.name!==undefined&&e.value!==undefined?(n.name=e.name,n.value=e.value):(n.name=t,n.value=e),l.appendChild(n)});if(i){l.setAttribute("target",t);var c=window.innerWidth-400,h=window.innerHeight-50,p=window.screenX+400,d=window.screenY+50;window.open("about:blank",t,"status=false, height="+h+", width="+c+", left="+p+", top="+d)}document.body.appendChild(l),l.submit()},navigateToPage:function(e,t,n){var r=[];Object.each(t,function(e,t){r.push(t+"="+escape(e))});var i=String.format("/{0}?{1}",e,r.join("&"));if(n){var s=window.innerWidth-400,o=window.innerHeight-50,u=window.screenX+400,a=window.screenY+50;window.open(i,"_blank","status=false, height="+o+", width="+s+", left="+u+", top="+a)}else{var f=window.open(i,"_top");f.focus()}},getSObjectDescribe:function(e){this.initSforce();var t=sforce.connection.describeSObject(e);return t},getDescribeGlobal:function(){return this.initSforce(),sforce.connection.describeGlobal()},getSObjectNameField:function(e){var t=Object.first(e.fields,function(e){return e.getBoolean("nameField")});return t?t.name:undefined},query:function(e){arguments.length>1&&(e=String.format.apply(String,arguments)),window.isDebug&&console.log(e);try{this.initSforce();var t=sforce.connection.queryAll(e);return t.getArray("records")}catch(n){throw console.log(n.faultstring),n}},batchQueryIn:function(e,t,n,r){var i=[],s="select {0} from {1} where {2} in ({3})";t instanceof Array&&(t=t.join());var o=85,u=parseInt(r.length/o);u<1&&(u=1);for(var a=0;a<u;a++){var f=r.slice(a*o,(a+1)*o),l=this.query(s,t,e,n,f.join());i=i.concat(l)}return i},update:function(e,t,n){this.initSforce(),sforce.connection.update([e],{onSuccess:function(e){var r=e[0],i=r.getBoolean("success");i?t(r):typeof n=="function"&&n(r.errors.message)},onFailure:function(e){typeof n=="function"&&n(e.message)}})},upsert:function(e,t,n,r){this.initSforce(),sforce.connection.upsert(e,[t],{onSuccess:function(e){var t=e[0],i=t.getBoolean("success");i?n(t):typeof r=="function"&&r(t.errors.message)},onFailure:function(e){typeof r=="function"&&r(e.message)}})},insert:function(e,t,n){this.initSforce(),e instanceof Array||(e=[e]),sforce.connection.create(e,{onSuccess:function(e){var r=e[0],i=r.getBoolean("success");i?e.length>1?t(e):t(r):typeof n=="function"&&r&&r.errors&&r.errors.message&&(e.length>1?n(e):n(r.errors.message.faultstring))},onFailure:function(e){typeof n=="function"&&n(e.message)}})},getUserInfo:function(){if(this.userInfo===undefined)if(window.isDebug)this.userInfo={organizationId:"00Do0000000KXVqEAO",userLocale:"en_US",userTimeZone:"America/Denver",currencySymbol:"$"};else try{this.initSforce(),this.userInfo=sforce.connection.getUserInfo()}catch(e){console.log(e)}return this.userInfo}}}),n("ajax",[],function(){var e={REQ_TIMEOUT_MS:3e4,createRequest:function(t,n,r){var i={};i.handleEvent=function(e,t){typeof e=="function"&&e(t)};var s=new XMLHttpRequest;s.onreadystatechange=function(){switch(s.readyState){case 1:break;case 2:break;case 3:break;case 4:clearInterval(i.timeout),s.status===200?i.handleEvent(i.onsuccess,s):i.handleEvent(i.onfail,s),i.handleEvent(i.oncomplete,s)}},i.request=s;var o=function(){s.abort(),clearInterval(i.timeout),i.handleEvent(i.onfail,"Request timed out.")};return i.request.onprogress=function(t){clearInterval(i.timeout),i.timeout=setInterval(o,e.REQ_TIMEOUT_MS)},i.get=function(){s.open("GET",t,!0,n,r),i.onopen(s),i.timeout=setInterval(o,e.REQ_TIMEOUT_MS),s.send()},i.post=function(u,a,f){typeof u=="string"?(s.open("POST",t,!0,n,r),typeof a=="string"&&s.setRequestHeader("Content-Type",a),i.onopen(s),i.timeout=setInterval(o,e.REQ_TIMEOUT_MS),s.send(u)):i.get()},i}};return e}),n("soap",["ajax","extensions"],function(e){var t={createRequest:function(t,n,r,i){var s=e.createRequest(t,r,i),o=function(e){e.setRequestHeader("SoapAction",n)};s.onopen=o;var u=s.handleEvent;return s.handleEvent=function(e,t){if(t.readyState===4&&t.status===200&&typeof e=="function")if(t.responseXML!==undefined&&t.responseXML.length>0)e(t.responseXML);else{var n=new DOMParser,r=n.parseFromString(t.responseText,"text/xml");e(r)}else u(e,t)},s.execute=function(e){s.post(e,"text/xml")},s},objectFromXml:function(e){var n={};if(e.childNodes&&e.childNodes.length>0)for(var r=0;r<e.childNodes.length;r++)if(e.childNodes[r].nodeName==="#text"){if(e.childNodes[r].nodeValue.match(/^\s*$/))continue;n=t.objectFromXml(e.childNodes[r])}else{var i=e.childNodes[r].nodeName;n[i]?(typeof n[i].push!="function"&&(n[i]=[n[i]]),n[i].push(t.objectFromXml(e.childNodes[r]))):n[i]=t.objectFromXml(e.childNodes[r])}else e!==undefined&&e.nodeValue!==null&&(n=e.nodeValue);if(e.attributes&&e.attributes.length>0)for(var s=0;s<e.attributes.length;s++)n[e.attributes[s].name]=e.attributes[s].value;return n},objectToXml:function(e,n){var r="";return typeof e=="object"?Object.each(e,function(n,i){var s=i;typeof e.xmlns=="string"&&(s+=' xmlns="'+e.xmlns+'"'),typeof n["xsi:type"]=="string"&&(s+=' xsi:type="'+n["xsi:type"]+'"'),i!=="xmlns"&&i!=="xsi:type"&&(n instanceof Array?Object.each(n,function(e){r+="<"+s+">"+t.objectToXml(e)+"</"+i+">\n"}):r+="<"+s+">"+t.objectToXml(n)+"</"+i+">\n")}):r=t.htmlSpecialChars(e.toString()),r},htmlSpecialChars:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}};return t}),n("KendoPopup",[],function(){return{popup:function(e,t,n,r){this.popupWithButtons(e,t,[{label:"Dismiss"},{label:n,click:r}])},popupWithButtons:function(e,t,n){var r=(new Date).getTime(),i=kendo.template("<div id='KendoPopupBox#=uniqueid#' style='display:none;'><p>#= val #</p><div style='float:right;'># buttons.map(function(item) { if(item.label) {#<span id='#=item.label.replace(/\\s+/g, '')##=uniqueid#' class='k-button'>#=item.label#</span>&nbsp;# }}) #</div></div>"),s={val:t,uniqueid:r,buttons:n},o=i(s);$("body").append(o);var u=$("#KendoPopupBox"+r);n&&n.length>0&&n.map(function(e){if(e.label){var t=$("#"+e.label.replace(/\s+/g,"")+r);t.bind("click",function(){u.data("kendoWindow").close(),typeof e.click=="function"&&e.click()})}}),u.data("kendoWindow")||u.kendoWindow({draggable:!0,modal:!0,resizable:!1,actions:["Close"],title:e}),u.data("kendoWindow").center().open()}}}),n("metadata",["soap","KendoPopup"],function(e,t){var n={soapHeader:'<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cmd="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Header>',soapHeaderEnd:"</soap:Header><soap:Body>",soapFooter:"</soap:Body></soap:Envelope>"},r={delegate:{onError:function(){}},sessionId:"",endpoint:"https://login.salesforce.com/services/Soap/c/31.0",apiVersion:31,xmlns:"http://soap.sforce.com/2006/04/metadata",makeRequestObject:function(e,t){var n={xmlns:this.xmlns};return n[e]=t,n},login:function(e,t,n){var r={username:e,password:t},i=this;this.xmlns="urn:enterprise.soap.sforce.com",this.beginMetadataRequest("login",r,"result",function(e){i.sessionId=e.sessionId,i.endpoint=e.metadataServerUrl,i.xmlns="http://soap.sforce.com/2006/04/metadata",n(e)})},listMetadata:function(e,t,n,r){var i={queries:{folder:e,type:t},asOfVersion:this.apiVersion};this.beginMetadataRequest("listMetadata",i,"listMetadataResponse",n,r)},describeMetadata:function(e,t){var n={asOfVersion:this.apiVersion};this.beginMetadataRequest("describeMetadata",n,"result",e,t)},updateMetadata:function(e,t,n,r,i){var s={metadata:n};this.beginMetadataRequest("updateMetadata",s,"result",r,i)},createMetadata:function(e,t,n,r,i){var s={metadata:n};this.beginMetadataRequest("createMetadata",s,"result",r,i)},readMetadata:function(e,t,n,r){var i={type:e,fullNames:t};this.beginMetadataRequest("readMetadata",i,"result",n,r)},beginMetadataRequest:function(t,r,i,s,o){var u=e.createRequest(this.endpoint,t);u.onsuccess=function(t){t=t.getElementsByTagName(i)[0],s(e.objectFromXml(t))},u.onfail=function(e){console.log(e.responseText),this.delegate&&typeof this.delegate.onError=="function"&&this.delegate.onError(e.responseText,e),typeof o=="function"&&o(e.responseText,e)};var a=this.makeRequestObject(t,r),f=e.objectToXml(a),l=n.soapHeader+(this.sessionId.length>0?"<cmd:SessionHeader><cmd:sessionId>"+this.sessionId+"</cmd:sessionId></cmd:SessionHeader>":"")+n.soapHeaderEnd,c=l+f+n.soapFooter;u.execute(c)},createButton:function(e,t,n,r,i,s){var o={"xsi:type":"WebLink",fullName:e+"."+t,availability:"online",displayType:"massActionButton",linkType:"javascript",masterLabel:n,openType:"onClickJavaScript",requireRowSelection:!0,url:r};this.createMetadata("webLink",e+"."+t,o,function(e){typeof i=="function"&&i(e)},s)},getCustomObject:function(e,t,n,r,i){var s={hasButton:!1,hasSearchResults:!1,hasListView:!1,custObj:null};this.readMetadata("CustomObject",e,function(e){s.custObj=e.records;var i=s.custObj.webLinks;if(i!=undefined){i.length==undefined&&(i=[i]);for(var o in i)if(i[o].fullName==t||i[o].fullName==n+t){s.hasButton=!0;break}}if(s.custObj.searchLayouts!=undefined){var u=s.custObj.searchLayouts.searchResultsCustomButtons,a=s.custObj.searchLayouts.listViewButtons;if(u!=undefined){typeof u=="string"&&(u=[u]);for(var o in u)if(u[o]==t||u[o]==n+t){s.hasSearchResults=!0;break}}if(a!=undefined){typeof a=="string"&&(a=[a]);for(var o in a)if(a[o]==t||a[o]==n+t){s.hasListView=!0;break}}}typeof r=="function"&&r(s)},i)},addToSearchLayouts:function(e,n,r,i,s){var o=this;this.readMetadata("CustomObject",e,function(e){var u=e.records;if(!u.searchLayouts){t.popup("Unsupported",u.fullName+" does not support search layouts");return}u.searchLayouts[r]==undefined?u.searchLayouts[r]=[]:typeof u.searchLayouts[r]=="string"&&(u.searchLayouts[r]=[u.searchLayouts[r]]);var a="";u.webLinks instanceof Array?Object.each(u.webLinks,function(e){e.fullName.indexOf("crmc_Grid")>0&&(a=e.fullName.split("__")[0]+"__")}):u.webLinks.fullName.indexOf("crmc_Grid")>0&&(a=u.webLinks.fullName.split("__")[0]+"__"),u.searchLayouts[r].push(a+n);var f={fullName:u.fullName,"xsi:type":u["xsi:type"],searchLayouts:u.searchLayouts};if(u.pluralLabel!=undefined)for(var l in u)l!="webLinks"&&l!="fields"&&l!="listViews"&&(f[l]=u[l]);o.updateMetadata("customObject",u.fullName,f,function(e){typeof i=="function"&&i(e)},s)})}};return r}),n("MassUpdate",["sfdc","metadata"],function(e,t){return{massUpdate:function(t,n){if(t.length>0){var r={retURL:n},i=[];Object.each(t,function(e){i.push({name:"ids",value:e})});if(t.length>200){var i={Ids:t.join()};e.postToVFPage("CRMC_MassUpdate","crmcMassUpdate",r,i)}else r.Ids=t.join(),e.navigateToVFPage("CRMC_MassUpdate","crmcMassUpdate",r)}else alert("Please select at least one record.")}}}),MassUpdate=t("MassUpdate")})();